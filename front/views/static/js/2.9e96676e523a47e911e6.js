webpackJsonp([2],{DN5n:function(t,e,a){(t.exports=a("I71c")(!0)).push([t.i,"\n.mrg10 {\n  margin: 10px;\n}\n","",{version:3,sources:["F:/OTProduction/app/src/views/ot/ot-myexamine.vue"],names:[],mappings:";AACA;EACE,aAAa;CACd",file:"ot-myexamine.vue",sourcesContent:["\n.mrg10 {\n  margin: 10px;\n}\n"],sourceRoot:""}])},HzJ8:function(t,e,a){t.exports={default:a("aSM5"),__esModule:!0}},Iq50:function(t,e,a){var n=a("DN5n");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("5ten")("46c74b18",n,!0,{})},TL66:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("HzJ8"),l=a.n(n),i=a("3cXf"),o=a.n(i),s=a("Zmd7"),r=a("byj+"),c=a("g8hR"),u=a("/P1q"),p=a("js1Z"),d={components:{"ot-info-detail-dialog":function(){return a.e(14).then(a.bind(null,"yKaH"))}},mounted:function(){var t=this;console.log("@@##myexamine mounted!!"),this.getList(),p.a.$on("applySuccess",function(){t.getList()})},methods:{selectModelChange:function(t){console.log("@@##selectModelChange:"+o()(t)),this.getList()},handleSizeChange:function(t){this.pageSize=t,this.getList()},handleCurrentChange:function(t){this.page=t,this.getList()},handleClick:function(t,e){this.$refs.detailDialog.open(t,e)},getList:function(){var t=this,e=this.$store.state.user.userInfo;1===this.selectModel?s.a.getCheckedList({userId:e.id,page:this.page,size:this.pageSize,account:e.account}).then(function(e){c.a.checkHttpResult(e)?(t.tableData=e.data.rows,t.totalCount=e.data.count):t.$message.error(e.msg)}):s.a.getExaminaList({userId:e.id,page:this.page,size:this.pageSize,account:e.account}).then(function(e){c.a.checkHttpResult(e)?(t.tableData=e.data.rows,t.totalCount=e.data.count):t.$message.error(e.msg)})},selectAll:function(t){var e=this;t&&t.forEach(function(t){e.$refs.multipleTable.toggleRowSelection(t,!0)})},toggleSelection:function(t){var e=this;t&&t.forEach(function(t){e.$refs.multipleTable.toggleRowSelection(t)})},singleCtrl:function(t,e){var a=this;"reject"!==e?s.a.changeExaminaStatus({id:t.id,deptId:t.deptId,status:t.status,ctrl:e}).then(function(t){c.a.checkHttpResult(t)?a.getList():a.$message.error(t.msg)}):this.$prompt("请输入理由","提示",{confirmButtonText:"拒绝",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"请输入拒绝理由"}).then(function(n){var l=n.value;s.a.changeExaminaStatus({id:t.id,deptId:t.deptId,status:t.status,remark:l,ctrl:e}).then(function(t){c.a.checkHttpResult(t)?a.getList():a.$message.error(t.msg)})}).catch(function(){})},handleSelectionChange:function(t){if(this.multipleSelection=[],t&&t.length>0){var e=!0,a=!1,n=void 0;try{for(var i,o=l()(t);!(e=(i=o.next()).done);e=!0){var s=i.value;this.multipleSelection.push(s.id)}}catch(t){a=!0,n=t}finally{try{!e&&o.return&&o.return()}finally{if(a)throw n}}}},multipPass:function(){var t=this;!this.multipleSelection||this.multipleSelection.length<1?this.$message.error("请需要审核的选项!"):s.a.passExaminaList({ids:this.multipleSelection}).then(function(e){c.a.checkHttpResult(e)&&(t.changePage(0),t.getList())})},changePage:function(t){this.page=t},dateFormat:function(t,e){var a=t[e.property],n=r.a.parseDate(a);return r.a.formatDate(n,"yyyy-MM-dd hh:mm")},dialogCallback:function(t){this.getList()}},data:function(){return{tableData:[],pageSize:10,page:1,totalCount:0,multipleSelection:[],options:u.a,selectModel:0,modelOptions:[{value:0,label:"未审批"},{value:1,label:"已审批"}]}}},g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"t-left"},[a("div",{staticClass:"mrg10 t-left"},[a("span",{staticClass:"demonstration"},[t._v("审批状态 ")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.selectModelChange},model:{value:t.selectModel,callback:function(e){t.selectModel=e},expression:"selectModel"}},t._l(t.modelOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.$store.state.common.tableLoading,expression:"$store.state.common.tableLoading"}],ref:"multipleTable",staticClass:"t-center",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","max-height":"600"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{type:"index",prop:"index",label:"编号",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"申请者"}}),t._v(" "),a("el-table-column",{attrs:{prop:"deptName",label:"部门","min-width":"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"startTime",label:"开始时间",formatter:t.dateFormat,"min-width":"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"endTime",label:"结束时间",formatter:t.dateFormat,"min-width":"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"days",label:"总时长"}}),t._v(" "),a("el-table-column",{attrs:{prop:"holidays",label:"调休时长"}}),t._v(" "),a("el-table-column",{attrs:{prop:"reason",label:"加班事由","min-width":"150","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\r\n       "+t._s(t.options["status"+e.row.status].name)+"\r\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){t.handleClick(e.row,!1)}}},[t._v("详情")]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){t.handleClick(e.row,!0)}}},[t._v("编辑")]),t._v(" "),0===t.selectModel?a("el-button",{attrs:{type:"text"},on:{click:function(a){t.singleCtrl(e.row,"pass")}}},[t._v("审核通过")]):t._e(),t._v(" "),0===t.selectModel?a("el-button",{attrs:{type:"text"},on:{click:function(a){t.singleCtrl(e.row,"reject")}}},[t._v("审核拒绝")]):t._e()]}}])})],1),t._v(" "),a("div",{staticClass:"mrg10"},[a("el-button",{on:{click:function(e){t.selectAll(t.tableData)}}},[t._v("全选")]),t._v(" "),a("el-button",{on:{click:function(e){t.toggleSelection(t.tableData)}}},[t._v("反选")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.multipPass()}}},[t._v("批量通过")])],1),t._v(" "),a("el-pagination",{staticClass:"overHidden t-right mrg10",attrs:{background:"",layout:"sizes, prev, pager, next","page-sizes":[5,10,20,50],"page-size":t.pageSize,total:t.totalCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),t._v(" "),a("ot-info-detail-dialog",{ref:"detailDialog",on:{callback:t.dialogCallback}})],1)},staticRenderFns:[]};var h=a("X4nt")(d,g,!1,function(t){a("Iq50")},null,null);e.default=h.exports},Zmd7:function(t,e,a){"use strict";var n=a("tNif"),l={getCheckedList:function(t){return n.a.post("examina/getCheckedList",t,n.a.TABLE_LOADING)},getExaminaList:function(t){return n.a.post("examina/getExaminaList",t,n.a.TABLE_LOADING)},changeExaminaStatus:function(t){return n.a.post("examina/changeExaminaStatus",t,n.a.FULL_LOADING)},passExaminaList:function(t){return n.a.post("examina/passExaminaList",t,n.a.FULL_LOADING)}};e.a=l},aSM5:function(t,e,a){a("dmd9"),a("wCtA"),t.exports=a("rLQK")},g8hR:function(t,e,a){"use strict";var n={SUCCESS:1,FAIL:-1,EMPTY:-2,EXCEPTION:-3,ERROR_DB:11,ERROR_PARAMS:12,checkHttpResult:function(t){return t&&t.code===n.SUCCESS}};e.a=n},rLQK:function(t,e,a){var n=a("Dc6E"),l=a("X6b2");t.exports=a("UusJ").getIterator=function(t){var e=l(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return n(e.call(t))}}});
//# sourceMappingURL=2.9e96676e523a47e911e6.js.map