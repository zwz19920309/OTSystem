webpackJsonp([4],{Gw49:function(t,e,a){"use strict";var n=a("tNif"),i={getDeptList:function(t){return n.a.post("settings/getDeptList",t,n.a.FULL_LOADING)},updateDept:function(t){return n.a.post("settings/updateDept",t,n.a.FULL_LOADING)},testFile:function(t){return n.a.post("settings/testFile",t,n.a.FULL_LOADING)}};e.a=i},TFBp:function(t,e,a){(t.exports=a("I71c")(!0)).push([t.i,"\n.mrg10 {\n  margin: 10px;\n}\n.next-page {\n  padding: 10px 0;\n  text-align: right;\n}\n","",{version:3,sources:["F:/OTProduction/app/src/views/ot/ot-allovertimen.vue"],names:[],mappings:";AACA;EACE,aAAa;CACd;AACD;EACE,gBAAgB;EAChB,kBAAkB;CACnB",file:"ot-allovertimen.vue",sourcesContent:["\n.mrg10 {\n  margin: 10px;\n}\n.next-page {\n  padding: 10px 0;\n  text-align: right;\n}\n"],sourceRoot:""}])},eyK8:function(t,e,a){"use strict";var n=a("tNif"),i={infoList:function(t){return n.a.post("overtimen/infoList",t,n.a.BUTTON_LOADING)},download:function(t){return n.a.get("overtimen/download",t,n.a.BUTTON_LOADING)},findDataByPage:function(t){return n.a.post("overtimen/findDataByPage",t,n.a.BUTTON_LOADING)},deleteData:function(t){return n.a.post("overtimen/deleteData",t,n.a.BUTTON_LOADING)},updateData:function(t){return n.a.post("overtimen/updateData",t,n.a.BUTTON_LOADING)},downloadExcelUrl:a("d2gY").a.backend.ip+"/ot/overtimen/download"};e.a=i},kAS4:function(t,e,a){var n=a("TFBp");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("5ten")("ae3b63b2",n,!0,{})},lo1a:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("byj+"),i=a("eyK8"),s=a("js1Z"),l=a("/P1q"),o=a("Gw49"),r={props:["downDate"],data:function(){return{dataList:[],currentPage:1,total:0,limit:10,searchDate:new Date,dialogFormVisible:!1,formLabelWidth:"120px",selectedData:{},editAble:!1,dateVal:[new Date,new Date],options:l.a,deptList:[],deptId:"",status:"",name:""}},components:{"ot-info-detail-dialog":function(){return a.e(13).then(a.bind(null,"yKaH"))}},methods:{getAllovertimen:function(){var t=this;this.datePeriod=this.datePeriod?this.datePeriod:n.a.formatDate(this.searchDate,"yyyy-MM-dd");var e={limit:this.limit,offset:(this.currentPage-1)*this.limit,datePeriod:this.datePeriod};e.deptId=this.deptId||0===this.deptId?this.deptId:"",e.status=this.status||0===this.status?this.status:"",e.name=this.name?e.name:"",i.a.findDataByPage(e).then(function(e){1===e.code&&(t.dataList=e.data.list,t.total=e.data.total)})},getDeptList:function(t){var e=this,a=t||{};o.a.getDeptList(a).then(function(t){1===t.code?e.deptList=t.data:e.$message.error(t.msg)})},sizeChange:function(t){this.currentPage=1,this.limit=t,this.getAllovertimen()},currentChange:function(t){this.currentPage=t,this.getAllovertimen()},changeDate:function(t){this.datePeriod=t,this.getAllovertimen(),s.a.$emit("changeAllOTDate",this.datePeriod)},changeEditorDate:function(t){t&&2===t.length&&(this.selectedData.startTime=t[0],this.selectedData.endTime=t[1])},reverseData:function(){this.dataList=[],this.currentPage=1,this.total=0,this.limit=10},deleteData:function(t){var e=this,a={id:t.id};i.a.deleteData(a).then(function(t){1===t.code&&(e.reverseData(),e.getAllovertimen())})},deletAction:function(t){var e=this;this.$confirm("确认删除该数据？").then(function(a){e.deleteData(t)}).catch(function(t){})},updateData:function(t){var e=this;i.a.updateData(this.selectedData).then(function(t){1===t.code&&e.getAllovertimen()})},updateAction:function(t){var e=this;this.$confirm("确认更新该数据？").then(function(a){e.updateData(t),e.dialogFormVisible=!1}).catch(function(t){})},dataDetail:function(t){this.dialogFormVisible=!0,this.editAble=!1,this.selectedData=n.a.clone(t),this.dateVal=[this.selectedData.startTime,this.selectedData.endTime],console.dir(this.selectedData),this.$refs.detailDialog.open(this.selectedData,!1)},dataEdit:function(t){this.dialogFormVisible=!0,this.editAble=!0,this.selectedData=n.a.clone(t),this.dateVal=[this.selectedData.startTime,this.selectedData.endTime]},dateFormat:function(t,e){var a=t[e.property],i=n.a.parseDate(a);return n.a.formatDate(i,"yyyy-MM-dd hh:mm")},changeDept:function(t){this.deptId=t}},created:function(){var t=this;s.a.$on("applySuccess",function(){t.getAllovertimen()}),this.getDeptList()}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"mrg10 t-left"},[a("el-form",{ref:"form",attrs:{inline:!0}},[a("span",{staticClass:"demonstration"},[t._v("月份"+t._s(t.downDate))]),t._v(" "),a("el-date-picker",{attrs:{type:"month","value-format":"yyyy-MM-dd","max-height":"600",placeholder:"选择月"},on:{change:t.changeDate},model:{value:t.searchDate,callback:function(e){t.searchDate=e},expression:"searchDate"}}),t._v(" "),a("el-form-item",{attrs:{label:"部门","label-width":"80px"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.changeDept},model:{value:t.deptId,callback:function(e){t.deptId=e},expression:"deptId"}},t._l(t.deptList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"申请状态"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},t._l(t.options,function(t){return a("el-option",{key:t.status,attrs:{label:t.name,value:t.status}})}))],1),t._v(" "),a("el-button",{attrs:{icon:"el-icon-search",type:"primary",size:"small"},on:{click:t.getAllovertimen}},[t._v("搜索")])],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.dataList,border:""}},[a("el-table-column",{attrs:{type:"index",prop:"index",label:"编号",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"申请者"}}),t._v(" "),a("el-table-column",{attrs:{prop:"deptName",label:"部门","min-width":"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"startTime",label:"开始时间",formatter:t.dateFormat,"min-width":"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"endTime",label:"结束时间",formatter:t.dateFormat,"min-width":"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"days",label:"总时长"}}),t._v(" "),a("el-table-column",{attrs:{prop:"holidays",label:"调休时长"}}),t._v(" "),a("el-table-column",{attrs:{prop:"reason",label:"加班事由","min-width":"150"}}),t._v(" "),a("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.options["status"+e.row.status].name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"t_dept.checkerName",label:"部门负责人"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.dataDetail(e.row)}}},[t._v("详情")])]}}])})],1),t._v(" "),a("div",{staticClass:"next-page"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,40],"page-size":t.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.sizeChange,"current-change":t.currentChange}})],1),t._v(" "),a("ot-info-detail-dialog",{ref:"detailDialog"})],1)},staticRenderFns:[]};var c=a("X4nt")(r,d,!1,function(t){a("kAS4")},null,null);e.default=c.exports}});
//# sourceMappingURL=4.9422794176e9a76e5a04.js.map