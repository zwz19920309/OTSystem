webpackJsonp([2],{BAQT:function(t,e,n){(t.exports=n("FZ+f")(!0)).push([t.i,"\n.mrg10 {\n  margin: 10px;\n}\n","",{version:3,sources:["/Users/cninsure/workspace-zzb/NodeJS/OT-Application/app/src/views/ot/ot-myexamine.vue"],names:[],mappings:";AACA;EACE,aAAa;CACd",file:"ot-myexamine.vue",sourcesContent:["\n.mrg10 {\n  margin: 10px;\n}\n"],sourceRoot:""}])},BO1k:function(t,e,n){t.exports={default:n("fxRn"),__esModule:!0}},TL66:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("BO1k"),i=n.n(a),o=n("tNif"),l={getExaminaList:function(t){return o.a.post("examina/getExaminaList",t,o.a.FULL_LOADING)},changeExaminaStatus:function(t){return o.a.post("examina/changeExaminaStatus",t,o.a.FULL_LOADING)},passExaminaList:function(t){return o.a.post("examina/passExaminaList",t,o.a.FULL_LOADING)}},s=n("byj+"),r={SUCCESS:1,FAIL:-1,EMPTY:-2,EXCEPTION:-3,ERROR_DB:11,ERROR_PARAMS:12,checkHttpResult:function(t){return t&&t.code===r.SUCCESS}},c=r,u=n("/P1q"),p=n("js1Z"),m={components:{"ot-info-detail-dialog":function(){return n.e(12).then(n.bind(null,"yKaH"))}},mounted:function(){var t=this;console.log("@@##myexamine mounted!!"),this.getList(),p.a.$on("applySuccess",function(){t.getList()})},methods:{handleSizeChange:function(t){this.pageSize=t,this.getList()},handleCurrentChange:function(t){this.page=t,this.getList()},handleClick:function(t){console.log(t),this.$refs.detailDialog.open(t,!1)},getList:function(){var t=this,e=this.$store.state.user.userInfo;l.getExaminaList({userId:e.id,page:this.page,size:this.pageSize,account:e.account}).then(function(e){c.checkHttpResult(e)?(t.tableData=e.data.rows,t.totalCount=e.data.count):t.$message.error(e.msg)})},selectAll:function(t){var e=this;t&&t.forEach(function(t){e.$refs.multipleTable.toggleRowSelection(t,!0)})},toggleSelection:function(t){var e=this;t&&t.forEach(function(t){e.$refs.multipleTable.toggleRowSelection(t)})},singleCtrl:function(t,e){var n=this;"reject"!==e?l.changeExaminaStatus({id:t.id,deptId:t.deptId,status:t.status,ctrl:e}).then(function(t){c.checkHttpResult(t)?n.getList():n.$message.error(t.msg)}):this.$prompt("请输入理由","提示",{confirmButtonText:"拒绝",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"请输入拒绝理由"}).then(function(a){var i=a.value;l.changeExaminaStatus({id:t.id,deptId:t.deptId,status:t.status,remark:i,ctrl:e}).then(function(t){c.checkHttpResult(t)?n.getList():n.$message.error(t.msg)})}).catch(function(){})},handleSelectionChange:function(t){if(this.multipleSelection=[],t&&t.length>0){var e=!0,n=!1,a=void 0;try{for(var o,l=i()(t);!(e=(o=l.next()).done);e=!0){var s=o.value;this.multipleSelection.push(s.id)}}catch(t){n=!0,a=t}finally{try{!e&&l.return&&l.return()}finally{if(n)throw a}}}},multipPass:function(){var t=this;!this.multipleSelection||this.multipleSelection.length<1?this.$message.error("请需要审核的选项!"):l.passExaminaList({ids:this.multipleSelection}).then(function(e){c.checkHttpResult(e)&&(t.changePage(0),t.getList())})},changePage:function(t){this.page=t},dateFormat:function(t,e){var n=t[e.property],a=s.a.parseDate(n);return s.a.formatDate(a,"yyyy-MM-dd hh:mm")}},data:function(){return{tableData:[],pageSize:10,page:1,totalCount:0,multipleSelection:[],options:u.a}}},g={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"t-left"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.$store.state.common.tableLoading,expression:"$store.state.common.tableLoading"}],ref:"multipleTable",staticClass:"t-center",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","max-height":"600"},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),n("el-table-column",{attrs:{type:"index",prop:"index",label:"编号",width:"80"}}),t._v(" "),n("el-table-column",{attrs:{prop:"name",label:"申请者"}}),t._v(" "),n("el-table-column",{attrs:{prop:"deptName",label:"部门","min-width":"150"}}),t._v(" "),n("el-table-column",{attrs:{prop:"startTime",label:"开始时间",formatter:t.dateFormat,"min-width":"120"}}),t._v(" "),n("el-table-column",{attrs:{prop:"endTime",label:"结束时间",formatter:t.dateFormat,"min-width":"120"}}),t._v(" "),n("el-table-column",{attrs:{prop:"days",label:"总时长"}}),t._v(" "),n("el-table-column",{attrs:{prop:"holidays",label:"调休时长"}}),t._v(" "),n("el-table-column",{attrs:{prop:"reason",label:"加班事由","min-width":"150","show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\r\n       "+t._s(t.options["status"+e.row.status].name)+"\r\n      ")]}}])}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text"},on:{click:function(n){t.handleClick(e.row)}}},[t._v("详情")]),t._v(" "),n("el-button",{attrs:{type:"text"},on:{click:function(n){t.singleCtrl(e.row,"pass")}}},[t._v("审核通过")]),t._v(" "),n("el-button",{attrs:{type:"text"},on:{click:function(n){t.singleCtrl(e.row,"reject")}}},[t._v("审核拒绝")])]}}])})],1),t._v(" "),n("div",{staticClass:"mrg10"},[n("el-button",{on:{click:function(e){t.selectAll(t.tableData)}}},[t._v("全选")]),t._v(" "),n("el-button",{on:{click:function(e){t.toggleSelection(t.tableData)}}},[t._v("反选")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.multipPass()}}},[t._v("批量通过")])],1),t._v(" "),n("el-pagination",{staticClass:"overHidden t-right mrg10",attrs:{background:"",layout:"sizes, prev, pager, next","page-sizes":[5,10,20,50],"page-size":t.pageSize,total:t.totalCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),t._v(" "),n("ot-info-detail-dialog",{ref:"detailDialog"})],1)},staticRenderFns:[]};var h=n("VU/8")(m,g,!1,function(t){n("lc4h")},null,null);e.default=h.exports},fxRn:function(t,e,n){n("+tPU"),n("zQR9"),t.exports=n("g8Ux")},g8Ux:function(t,e,n){var a=n("77Pl"),i=n("3fs2");t.exports=n("FeBl").getIterator=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return a(e.call(t))}},lc4h:function(t,e,n){var a=n("BAQT");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n("rjj0")("8f3d085a",a,!0,{})}});
//# sourceMappingURL=2.0fe2a9e634e2aa12c45a.js.map